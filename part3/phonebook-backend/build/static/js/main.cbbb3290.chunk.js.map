{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","createPerson","newPersonObj","axios","post","then","response","data","getPersons","get","deletePerson","id","delete","replacePerson","put","Notification","message","className","type","text","SearchBox","filtere","handleFiltereChange","value","onChange","FormField","addPerson","newName","newNumber","handleNameChange","handleNumberChange","onSubmit","PhonebookDisplay","person","handleDelete","name","number","onClick","App","useState","persons","setPersons","setNewName","setNewNumber","setFiltere","setMessage","useEffect","personServices","returnedPersons","console","log","window","confirm","filter","pes","catch","setTimeout","personsListDisp","useFilter","likelyMatches","includes","map","matches","key","event","target","preventDefault","personObj","sameName","find","replacedPerson","p","concat","err","returnedPerson","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cbbb3290.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n// const baseUrl = 'http://localhost:3001/api/persons';\r\nconst baseUrl = 'api/persons';\r\n\r\nconst createPerson = (newPersonObj) => {\r\n  const request = axios.post(baseUrl, newPersonObj);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst getPersons = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst replacePerson = (id, newPersonObj) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newPersonObj);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default {\r\n  createPerson,\r\n  getPersons,\r\n  deletePerson,\r\n  replacePerson\r\n};","import React, { useState, useEffect } from 'react';\nimport personServices from './services/persons';\n\nconst Notification = ({message}) => {\n  if (message === null) return null;\n\n  return (\n    <div className={message.type}>\n      {message.text}\n    </div>\n  )\n}\n\nconst SearchBox = ({filtere, handleFiltereChange}) => {\n\n  return (\n    <div>\n      filter shown with \n      <input \n        type=\"text\"\n        value={filtere}\n        onChange={handleFiltereChange}/>\n    </div>\n  );\n};\n\nconst FormField = ({addPerson, newName, newNumber, handleNameChange, handleNumberChange}) => {\n  \n  return (\n    <div>\n      <form onSubmit={addPerson}>\n        <div>\n          name: <input \n                  type=\"text\"\n                  value={newName}\n                  onChange={handleNameChange}/>\n        </div>\n        <div>\n          number: <input\n                    type=\"text\"\n                    value={newNumber}\n                    onChange={handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n      </div>\n  );\n};\n\nconst PhonebookDisplay = ({ person, handleDelete }) => {\n  \n  return (\n    <div>\n      <li>{person.name} {person.number} <button onClick={() => handleDelete(person)}>delete</button></li>\n    </div>\n  );\n};\n\nfunction App() {\n  const [ persons, setPersons ] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber] = useState('');\n  const [ filtere, setFiltere ] = useState('');\n  const [ message, setMessage ] = useState({ text: \" \", type: \"\"});\n\n  const hook = (() => {\n    personServices\n      .getPersons()\n      .then(returnedPersons => {\n        setPersons(returnedPersons);\n        console.log(persons)\n      });\n  });\n  useEffect(hook, []);\n\n  const handleDelete = person => {\n    ;\n    if (window.confirm(`are you sure you want to delete ${person.name}?`)) {\n      personServices\n        .deletePerson(person.id)\n        .then((response) => {\n          console.log(response);\n          setPersons(persons.filter(pes => pes.id !== person.id));\n          setMessage({\n            text: `${person.name} has been successfully deleted from phonebook`,\n            type: \"deleted\"\n          });\n        })\n        .catch(() => {\n          setPersons(persons.filter(pes => pes.id !== person.id))\n          setMessage({\n            text: `${person.name} could not be found in the server`,\n            type: \"fail\"\n          });\n      });\n      setTimeout(() => {\n        setMessage(null);\n      }, 5000);\n    };\n  };\n\n  const handleFiltereChange = (event) => {\n    setFiltere(event.target.value);\n  };\n\n  // console.log(persons);\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(\n      event.target.value);\n  };\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const personObj = { name: newName, number: newNumber };\n    const sameName = persons.find(person => person.name === newName);\n\n      if (!sameName) {\n        personServices\n\n          .createPerson(personObj)\n          .then(returnedPerson => {\n            setPersons(persons.concat(returnedPerson));\n            setNewNumber('')\n          })\n          .then(() => {\n            setNewName('');\n            setMessage({\n              text: `Added ${newName} successfully to phonebook`,\n              type: \"success\"\n            });\n          })\n          .catch((error) => {\n            setMessage({ \n              text: `Person validation failed: ${error.response.data.error}`,\n              type: \"fail\"})\n          });\n      } else {\n        if (window.confirm(`${newName} is already added to phonebook, replace the old number with a new one`)) {\n          const newPersonObj = { name: newName, number: newNumber }\n          newPersonObj.id = sameName.id;\n          personServices\n            .replacePerson(sameName.id, newPersonObj)\n            .then((replacedPerson) => {\n              setPersons(persons.filter(p => p.id !== sameName.id).concat(replacedPerson));\n              setNewName('');\n              setNewNumber('');\n              setMessage({\n                text: `Success: ${newName} number has been successfully updated to ${newNumber}`,\n                type: \"updated\"\n              });\n            })\n            .catch(err => {\n              console.log(err.response.data)\n              setMessage({ \n                text: `${newName} has been deleted from the server`,\n                type: \"failed\"})\n            });\n        };\n      };\n      setTimeout(() => {\n        setMessage(null)\n      }, 7000);\n  };\n\n  const useFilter = () => {\n    if ( filtere !== '') {\n      return true;\n    };\n  };\n\n  const personsList = () => \n    persons.map(person => (\n      <PhonebookDisplay \n        key={person.id}\n        person={person}\n        handleDelete={handleDelete} /> \n    )\n  );\n\n  const filteredList = () => {\n    const personsMatch = persons.filter(likelyMatches => likelyMatches.name.includes(filtere));\n\n    return personsMatch.map(matches => \n      <PhonebookDisplay\n        key={matches.id}\n        person={matches}\n        handleDelete={handleDelete} />\n    );\n  };\n  \n  const personsListDisp =  useFilter() ? filteredList() : personsList();\n\n  useEffect(() => {\n    personServices\n      .getPersons()\n      .then(returnedPersons => {\n        setPersons(returnedPersons);\n      });\n  }, [setPersons])\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification \n        message={message} /><br />\n      <SearchBox  \n        filtere={filtere}\n        handleFiltereChange={handleFiltereChange} />\n\n      <h1>add a new</h1>\n      <FormField  \n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber} \n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange} />\n\n      <h1>Name and Numbers</h1>\n      <ul>\n        {personsListDisp}\n      </ul>\n    </div>\n  );\n};\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n    "],"sourceRoot":""}